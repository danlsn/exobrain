#+TITLE: Various Linux things
#+logseq_title: linux
#+filetags: linux

* docker                                                             :docker:
:PROPERTIES:
:ID:       dckr
:END:
** [2018-06-15] ~docker system prune~ to cleanup
:PROPERTIES:
:ID:       dckrsystmprntclnp
:END:

* systemd                                                           :systemd:
:PROPERTIES:
:ID:       systmd
:END:
** Debugging: ~systemctl --failed~,  ~journalctl~
:PROPERTIES:
:ID:       dbggngsystmctlfldjrnlctl
:END:
logs -- for individual jobs you can see them via status (or sdj)
presistent is not showing anythin by default?
** Profiling: ~systemd-analyze blame~
:PROPERTIES:
:ID:       prflngsystmdnlyzblm
:END:

* networking                                                        :network:
:PROPERTIES:
:ID:       ntwrkng
:END:
** who uses local port
:PROPERTIES:
:ID:       whsslclprt
:END:
: sudo ss -tulpn | grep 5060
: sudo ss -anpt  | grep 8640
** testing if port is open
:PROPERTIES:
:ID:       tstngfprtspn
:END:
: netcat -l 5559

one the other machine
: echo "TEST" | netcat host 5559

* apt
:PROPERTIES:
:ID:       pt
:END:
** install build dependencies: ~sudo apt-get build-dep package~
:PROPERTIES:
:ID:       nstllblddpndncssdptgtblddppckg
:END:

* cron                                                                 :cron:
:PROPERTIES:
:ID:       crn
:END:
** [2018-02-26] if cron fails to start a job, it will send the output to local mail
:PROPERTIES:
:ID:       mnfcrnflststrtjbtwllsndthtpttlclml
:END:
: grep cron /var/log/syslog
: tail -f /var/log/syslog | grep cron
** [2018-05-10] mail subject -- use bash comment operator
:PROPERTIES:
:ID:       thmlsbjctsbshcmmntprtr
:END:
:  *:* TestJob; cron command

mind the space after colon!

* sandboxing                                                        :sandbox:
:PROPERTIES:
:ID:       sndbxng
:END:
** ~firejail~ for network sandbox                           :network:testing:
:PROPERTIES:
:ID:       frjlfrntwrksndbx
:END:
- doesn't require root!
- ~firejail --noprofile --net=none~

* udev                                                                 :udev:
:PROPERTIES:
:ID:       dv
:END:
** ~udevadm info /dev/sdc2~
:PROPERTIES:
:ID:       dvdmnfdvsdc
:END:
** [2019-03-07] when you update rules file ~sudo udevadm control --reload-rules~
:PROPERTIES:
:ID:       thwhnypdtrlsflsddvdmcntrlrldrls
:END:
** [2019-03-07] to trigger the target script ~sudo udevadm trigger~
:PROPERTIES:
:ID:       thttrggrthtrgtscrptsddvdmtrggr
:END:

* [#C] [2017-05-08] Gateway 0.0.0.0 means that the subnet is link-local i.e. there is no gateway involved, the packets are delivered directly to the target :network:
:PROPERTIES:
:ID:       gtwymnsthtthsbntslnklclthhpcktsrdlvrddrctlytthtrgt
:END:

* [2018-06-08] Linux ignores the setuid bit on all interpreted executables (i.e. executables starting with a #! line).
:PROPERTIES:
:ID:       lnxgnrsthstdbtnllntrprtdxctblsxctblsstrtngwthln
:END:
ok apparently setuid shell scripts are quite risky...
