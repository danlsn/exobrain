#+TITLE: Python: best practices
#+filetags: python

* testing                                                           :testing:
:PROPERTIES:
:ID:       ae2b1fca515949e5d54fb22b8ed95575
:END:
** nose is abandoned
:PROPERTIES:
:ID:       dd242f17627ca96651f853d9c302aa3b
:END:
** pytest is the best apparently                                     :pytest:
:PROPERTIES:
:ID:       390054ae7eb9b463f27fb39f5c4f0a07
:END:
- uses the built in =assert=
  : assert 1 == 1, 'This is my error message, which is optional'
- parameterized tests
- fixtures: These aren't the setup/teardown fixtures (per-se), but more like dependency injection (and are incredibly useful). You can even inject a fixture into a fixture (say you need to log in a user, but you need an HTTP client for it to work, you probably use that client elsewhere so DRY it up):
- markers: Easy way to categorize tests (and coincidentally run only those groups)
  : @pytest.mark.slow
  : def test_slow_running_thing():
  :     time.sleep(500)
- parallel execution via xdist

* logging
:PROPERTIES:
:ID:       ad8a2265fa17b7808fca5ae77cada94f
:END:
** simple
:PROPERTIES:
:ID:       8dbdda48fb8748d6746f1965824e966a
:END:
: import logging
: logging.basicConfig(level=logging.INFO) # apparently callin basicconfig at least one is important
: logging.exception('Caught an error' + str(e))

** use ~logzero~ for nice colored logs
:PROPERTIES:
:ID:       451eb16eee75610a9e241318cdec44fd
:END:

* json                                                                 :json:
:PROPERTIES:
:ID:       466deec76ecdf5fca6d38571f6324d54
:END:
** ~json.dump(jobj, stdout, indent=4, sort_keys=True, ensure_ascii=False)~
:PROPERTIES:
:ID:       563278d5926a03e85eb2e2c08d343c96
:END:


* TODO asyncio
:PROPERTIES:
:ID:       ee6541e67770f6f71c9de9fbdf4167ea
:END:

* [#B] [2020-02-12] Guido van Rossum on Twitter: "@jonasrk You missed mypy. Simpler docs use markdown, not ReST (Sphinx). Black is overrated unless your team argues over style a lot. You don't need Pylint if you're using flake8. Never heard of poetry or dependabot. And you should use a CI solution, e.g. Travis-CI, to run your tests." / Twitter https://twitter.com/gvanrossum/status/1227126706089021440
:PROPERTIES:
:ID:       19c320743326ccea0dd48700f5226f0c
:END:
: You don't need Pylint if you're using flake8

hmm

* [#C] [2018-05-08] configuration via class variables -- not great while testing since configuration has to be reloaded...
:PROPERTIES:
:ID:       0cadc844e1747fa90854b19813b6da4e
:END:
