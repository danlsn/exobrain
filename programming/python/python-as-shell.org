#+TITLE: Python as a system shell
#+filetags: :shell:python:

* CNCL xonsh                                                          :xonsh:
:PROPERTIES:
:ID:       ef1b1d55ea22a2c250691cc9026ec754
:END:
xonsh http://xon.sh/tutorial.html
- importing local modules
  import sys
  sys.path.insert(0, '')
- no way of using source as in bash?
- DIR = os.path.dirname(os.path.abspath(sys.argv[0])) # TODO move it to python preamble?


* CNCL plumbum
:PROPERTIES:
:ID:       b3e376b42c6a61e023a69251ca44f46f
:END:
http://plumbum.readthedocs.io/en/latest/

** [2015-07-18] messing with plumbum
:PROPERTIES:
:ID:       cacf7cf0406815b8a92d9ee174c5b3ac
:END:
#+begin_src python
  from plumbum import local, ProcessExecutionError
  from plumbum.commands.modifiers import RETCODE, BG

  hg = local['hg']
  git = local['git']

  if hg['status'][path] & RETCODE == 0:
      with local.cwd(local.cwd / path):
  	pass
  	# execute the local command

  ret, out, err = git['config', 'branch.master.remote'].run(retcode=0) # expected retcode
#+end_src

* http://pymotw.com/2/cmd/
:PROPERTIES:
:ID:       6c29ba01ec2228c1084c1d1812b9ca9e
:END:
* https://pypi.python.org/pypi/termcolor
:PROPERTIES:
:ID:       519f579ddd013eecf7beb320d62c812f
:END:
* https://pypi.python.org/pypi/sh
:PROPERTIES:
:ID:       12d9ab66d37fe3416aa63956ecf8f08a
:END:
* CNEL ln command : named args!
:PROPERTIES:
:ID:       beab85363828f5eda8779a888caa84a1
:END:
* conky?
:PROPERTIES:
:ID:       e48955a0c01667e952c249357851e860
:END:
http://www.jperla.com/blog/post/a-clean-python-shell-script

* [#D] .
:PROPERTIES:
:ID:       5058f1af8388633f609cadb75a75dc9d
:END:
#+begin_src python
  from pprint import pprint
  from pathlib import Path
  cwd = Path('.') # make Path iterable?
  cwf.iterdir() # iterator, convert to dir
  path = cwd.join('file.png')
  path.suffix # .png
  path.stem # file

  from filecmp import cmp
#+end_src
