#+TITLE: Python as a system shell

* CNCL xonsh                                                          :xonsh:
:PROPERTIES:
:ID:       xnsh
:END:
xonsh http://xon.sh/tutorial.html
- importing local modules
  import sys
  sys.path.insert(0, '')
- no way of using source as in bash?
- DIR = os.path.dirname(os.path.abspath(sys.argv[0])) # TODO move it to python preamble?


* CNCL plumbum
:PROPERTIES:
:ID:       plmbm
:END:
http://plumbum.readthedocs.io/en/latest/

** [2015-07-18] messing with plumbum
:PROPERTIES:
:ID:       stmssngwthplmbm
:END:
#+begin_src python
  from plumbum import local, ProcessExecutionError
  from plumbum.commands.modifiers import RETCODE, BG

  hg = local['hg']
  git = local['git']

  if hg['status'][path] & RETCODE == 0:
      with local.cwd(local.cwd / path):
  	pass
  	# execute the local command

  ret, out, err = git['config', 'branch.master.remote'].run(retcode=0) # expected retcode
#+end_src

* http://pymotw.com/2/cmd/
:PROPERTIES:
:ID:       pymtwcmcmd
:END:
* https://pypi.python.org/pypi/termcolor
:PROPERTIES:
:ID:       spyppythnrgpyptrmclr
:END:
* https://pypi.python.org/pypi/sh
:PROPERTIES:
:ID:       spyppythnrgpypsh
:END:
* CNEL ln command : named args!
:PROPERTIES:
:ID:       cnllncmmndnmdrgs
:END:
* conky?
:PROPERTIES:
:ID:       cnky
:END:
http://www.jperla.com/blog/post/a-clean-python-shell-script

* [#D] .
:PROPERTIES:
:ID:       1053_1313
:END:
#+begin_src python
  from pprint import pprint
  from pathlib import Path
  cwd = Path('.') # make Path iterable?
  cwf.iterdir() # iterator, convert to dir
  path = cwd.join('file.png')
  path.suffix # .png
  path.stem # file

  from filecmp import cmp
#+end_src


* related                                                      :python:shell:
:PROPERTIES:
:ID:       rltd
:END:
