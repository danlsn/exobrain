#+TITLE: Python
#+filetags: python

* [#B] * testing                                                    :testing:
:PROPERTIES:
:ID:       tstng
:END:
** TODO [#B] [2020-03-27] Hypothesis has a set of Pandas strategies for generating data :pandas:
:PROPERTIES:
:ID:       frhypthsshsstfpndsstrtgsfrgnrtngdt
:END:
: https://www.hillelwayne.com/talks/beyond-unit-tests/

** [2020-05-05] [[https://stackoverflow.com/questions/22627659/run-code-before-and-after-each-test-in-py-test][python - Run code before and after each test in py.test? - Stack Overflow]]
:PROPERTIES:
:ID:       tsstckvrflwcmqstnsrncdbfrndftrchtstnpytststckvrflw
:END:
: py.test fixtures are a technically adequate method to achieve your purpose.
: 
: You just need to define a fixture like that:
: 
: @pytest.fixture(autouse=True)
: def run_around_tests():
** [2019-08-02] python - How should I structure a pytest test only package? - Stack Overflow :testing:project:pip:
:PROPERTIES:
:ID:       frpythnhwshldstrctrpytsttstnlypckgstckvrflw
:END:
https://stackoverflow.com/questions/48111426/how-should-i-structure-a-pytest-test-only-package/48350323#48350323
distribute tests with package..
** TODO [#B] doctest?
:PROPERTIES:
:CREATED:  [2019-02-26]
:ID:       dctst
:END:
** pytest can detect recursion                                       :pytest:
:PROPERTIES:
:ID:       pytstcndtctrcrsn
:END:

* [#B] * profiling                                              :performance:
:PROPERTIES:
:ID:       prflng
:END:
** [#B] [2020-03-08] what-studio/profiling: An interactive continuous Python profiler
:PROPERTIES:
:ID:       snwhtstdprflngnntrctvcntnspythnprflr
:END:
https://github.com/what-studio/profiling
: profiling live-profile webserver.py

ok, this is really nice and easy to use
*** [2020-07-28] kinda unmaintainerd though?
:PROPERTIES:
:ID:       tkndnmntnrdthgh
:END:
** [#A] [2019-07-20] profiling with cprof
:PROPERTIES:
:ID:       stprflngwthcprf
:END:
: python3 -m cProfile -o stats.prof script.py
: snakeviz stats.prof

** [#C] [2020-01-13] rkern/line_profiler: Line-by-line profiling for Python
:PROPERTIES:
:ID:       mnrkrnlnprflrlnbylnprflngfrpythn
:END:
https://github.com/rkern/line_profiler

** [2018-03-10] profiling
:PROPERTIES:
:ID:       stprflng
:END:
: python3 -m cProfile -s tottime process.py | less
: sudo apt install kcachegrind
: pip3 install --user pyprof2calltree


: https://julien.danjou.info/guide-to-python-profiling-cprofile-concrete-case-carbonara/
: python -m cProfile -o myscript.cprof myscript.py
: pyprof2calltree -k -i myscript.cprof

** TODO ipython?
:PROPERTIES:
:ID:       pythn
:END:
** timeit
:PROPERTIES:
:ID:       tmt
:END:


* [#B] * packaging                                                      :pip:
:PROPERTIES:
:ID:       pckgng
:END:
** [2020-04-02] minimal-setup-py/setup.py at master · maet3608/minimal-setup-py
:PROPERTIES:
:ID:       thmnmlstppystppytmstrmtmnmlstppy
:END:
https://github.com/maet3608/minimal-setup-py/blob/master/setup.py

** install only dependencies: ~pip3 install --user -e .~
:PROPERTIES:
:ID:       nstllnlydpndncsppnstllsr
:END:
** install multiple packages at once
:PROPERTIES:
:ID:       nstllmltplpckgstnc
:END:
ok, apparently pip does use some sort of 'set compiling', so worth doing that
  https://github.com/pypa/pip/issues/988

** [#A] [2020-04-24] local PIP dependency: if the repo is in ~/path/to/repo~, put ~HPI@git+file://DUMMY/path/to/repo@master~ in ~setup.py~ :pip:
:PROPERTIES:
:ID:       frlclppdpndncyfthrpsnpthtpgtfldmmypthtrpmstrnstppy
:END:
no idea why you need DUMMY bit, must be some parsing quirk :shrug:
also, sometimes it needs //DUMMY, sometimes ///DUMMY ???

** TODO [#B] [2019-12-15] bast/pypi-howto: How to publish Python packages on PyPI. :pypi:
:PROPERTIES:
:ID:       snbstpyphwthwtpblshpythnpckgsnpyp
:END:
https://github.com/bast/pypi-howto

** TODO [#C] [2019-07-02] Testing & Packaging · Homepage of Hynek Schlawack
:PROPERTIES:
:ID:       ttstngpckgnghmpgfhynkschlwck
:END:
https://hynek.me/articles/testing-packaging/
: Your tests do not run against the package as it will be installed by its users. They run against whatever the situation in your project directory is.
*** [2019-07-25] o
:PROPERTIES:
:ID:       th
:END:
: To achieve that, you just move your packages into a src directory and add a where argument to find_packages() in your setup.py:
: 
: setup(
:     [...]
:     packages=find_packages(where="src"),
:     package_dir={"": "src"},
: )
** TODO releasing on pypi                                              :pypi:
:PROPERTIES:
:CREATED:  [2019-12-20]
:ID:       rlsngnpyp
:END:
ok, that seems to be way easier

: hatch build --clean --verbose
: hatch release --strict "$@"
* [#B] * debugging                                                    :debug:
:PROPERTIES:
:ID:       dbggng
:END:
** TODO [#C] [2019-04-09] ~with ipdb.launch_ipdb_on_exception()~      :habit:
:PROPERTIES:
:ID:       3e88305f-f19d-43d2-ad9e-2e761ded20b5
:END:
** [#C] [2019-12-05] python3.7 has a ~breakpoint()~ builtin + more https://hackernoon.com/python-3-7s-new-builtin-breakpoint-a-quick-tour-4f1aebc444c
:PROPERTIES:
:ID:       thpythnhsbrkpntbltnmrshckthnsnwbltnbrkpntqcktrfbcc
:END:

** TODO ~ipdb pp~ for pretty print                                    :habit:
:PROPERTIES:
:CREATED:  [2019-02-03]
:ID:       1270a53a-67c7-469d-b31e-eaa1216d4a91
:END:
* [#B] * bad things about python
:PROPERTIES:
:CREATED:  [2018-03-01]
:ID:       bdthngsbtpythn
:END:
- lambdas suck
  - statements, not expressions, you are essentially restrictet to a single line
  - no local variables in lambdas (although with walrus operation it's a bit better now)
  - http://math.andrej.com/2009/04/09/pythons-lambda-is-broken
- scoping (i.e. only local and global scopes)
- GIL makes the concurrency very annoying at times
- no static typing (although it's kinda okay now with annotations and #mypy)

* [#B] * static analysers
:PROPERTIES:
:ID:       sttcnlysrs
:END:
** monkeytype -- automatic typing annotations generation               :mypy:
:PROPERTIES:
:ID:       mnkytyptmtctypngnnttnsgnrtn
:END:
** TODO would be nice to have  static analysis that checks you are not using global variables, etc.
:PROPERTIES:
:CREATED:  [2018-01-20]
:ID:       wldbncthvsttcnlyssthtchcksyrntsngglblvrblstc
:END:
however there are not any tools which do that...
** [#C] bandit  -- security checks                                 :security:
:PROPERTIES:
:ID:       bndtscrtychcks
:END:
https://github.com/openstack/bandit
*** [2021-01-16] wouldn't say it's super useful... might detect occasional eval or whatever, but won't help with more sophisticated stuff
:PROPERTIES:
:ID:       stwldntsytssprsflmghtdtctbtwnthlpwthmrsphstctdstff
:END:
* [#C] * libraries
:PROPERTIES:
:ID:       lbrrs
:END:
** [2019-04-02] peopledoc/workalendar: Worldwide holidays and workdays computational toolkit.
:PROPERTIES:
:ID:       tppldcwrklndrwrldwdhldysndwrkdyscmpttnltlkt
:END:
https://github.com/peopledoc/workalendar

** [2018-12-09] Altair: Declarative Visualization in Python — Altair 2.3.0 documentation :viz:
:PROPERTIES:
:ID:       snltrdclrtvvslztnnpythnltrdcmnttn
:END:
https://altair-viz.github.io/index.html
* [#C] * Import system
:PROPERTIES:
:ID:       mprtsystm
:END:
** TODO figure it out -- very confusing!
:PROPERTIES:
:ID:       fgrttvrycnfsng
:END:
** [2017-12-17] from . import module
:PROPERTIES:
:ID:       snfrmmprtmdl
:END:
local import

** [#B] [2020-01-17] Alone Djangonaut – How python's import machinery works
:PROPERTIES:
:ID:       frlndjngnthwpythnsmprtmchnrywrks
:END:
https://manikos.github.io/how-pythons-import-machinery-works
: origin

** [#C] [2019-06-29] python - Relative imports for the billionth time - Stack Overflow
:PROPERTIES:
:ID:       stpythnrltvmprtsfrthbllnthtmstckvrflw
:END:
https://stackoverflow.com/questions/14132789/relative-imports-for-the-billionth-time
: .. are only relative in a package
: However, if your module's name is __main__, it is not considered to be in a package. Its name has no dots, and therefore you cannot use from .. import statements inside it. If you try to do so, you will get the "relative-import in non-package" error.
** DONE [#D] [2019-06-11] relative imports are discouraged
:PROPERTIES:
:ID:       5b4fffdc-a69f-4c71-bb78-39ddc8ac2fdd
:END:

* [#C] * datetime handling                                         :datetime:
:PROPERTIES:
:ID:       dttmhndlng
:END:
** [#B] [2018-09-04] utcfromtimestamp -- returns timestamp, unaware; fromtimestamp -- returns offset + timestamp, unaware
:PROPERTIES:
:ID:       ttcfrmtmstmprtrnstmstmpnwmtmstmprtrnsffsttmstmpnwr
:END:
: In : datetime.fromtimestamp(123)
: Out: datetime.datetime(1970, 1, 1, 4, 2, 3)


: In : datetime.utcfromtimestamp(123)
: Out: datetime.datetime(1970, 1, 1, 0, 2, 3)
** [#B] [2018-09-04] ok, seems that it's better to use ~pytz.utc.localize(tz_unaware_datetime)~
:PROPERTIES:
:ID:       tksmsthttsbttrtspytztclclztznwrdttm
:END:

** [2020-05-02] [[https://github.com/zachwill/moment][zachwill/moment: Dealing with dates in Python shouldn't have to suck.]]
:PROPERTIES:
:ID:       stsgthbcmzchwllmmntzchwllgwthdtsnpythnshldnthvtsck
:END:
: # Create a moment with words in it
: moment.date("December 18, 2012")
** [2020-05-02] [[https://github.com/zachwill/moment][zachwill/moment: Dealing with dates in Python shouldn't have to suck.]]
:PROPERTIES:
:ID:       stsgthbcmzchwllmmntzchwllgwthdtsnpythnshldnthvtsck
:END:
: # Create a moment that would normally be pretty hard to do
: moment.date("2 weeks ago")
* [#C] * logging                                                    :logging:
:PROPERTIES:
:ID:       lggng
:END:
** [2018-07-05] creating top level logger is always bad (may happen before configuring). use factory method :logging:
:PROPERTIES:
:ID:       thcrtngtplvllggrslwysbdmyhppnbfrcnfgrngsfctrymthd
:END:

* [#C] * docs
:PROPERTIES:
:ID:       dcs
:END:
** pydoc
:PROPERTIES:
:CREATED:  [2018-04-15]
:ID:       pydc
:END:
-k: keyword search
-g: gui
** ipython: ? and ??
:PROPERTIES:
:ID:       pythnnd
:END:


* [#C] * ipdb                                                          :ipdb:
:PROPERTIES:
:ID:       pdb
:END:
related #repl
** TODO [#D] [2019-04-09] python - Use IPython magic functions in ipdb shell - Stack Overflow
:PROPERTIES:
:ID:       tpythnspythnmgcfnctnsnpdbshllstckvrflw
:END:
https://stackoverflow.com/questions/16184487/use-ipython-magic-functions-in-ipdb-shell
: shell.find_line_magic('cpaste')()
* ----------------------------------
:PROPERTIES:
:ID:       8582_8620
:END:

* [#B] [2019-09-22] [[https://reddit.com/r/Python/comments/d4zfhc/python3_fstrings_a_complete_guide_to_the_most/f0ieyws/][Python3 f-strings - A complete guide to the most well received feature of Python 3.]] /r/Python
:PROPERTIES:
:ID:       snsrddtcmrpythncmmntsdzfhmstwllrcvdftrfpythnrpythn
:END:
: That’s a part of python’s data model like `len`, `reversed`, `iter`, …:
: `datetime` simply defines [`datetime.__format__`](https://docs.python.org/3/library/datetime.html#datetime.date.__format__). The method [is explained here](https://docs.python.org/3/reference/datamodel.html#object.__format__).

* TODO [#B] [2019-09-16] typeddjango/awesome-python-typing: Collection of awesome Python types, stubs, plugins, and tools to work with them. https://github.com/typeddjango/awesome-python-typing
:PROPERTIES:
:ID:       mntypddjngwsmpythntypngclhbcmtypddjngwsmpythntypng
:END:

* [#B] [2019-05-11] To yield or not to yield                          :yield:
:PROPERTIES:
:ID:       sttyldrnttyld
:END:
https://barahilia.github.io/blog/computers/2017/01/04/to-yield-or-not-to-yield.html
: Finally we came to this. To me it is more important that generators make code more elegant. Performance is usually relevant to smaller hot spots.
: The idea is simple: in comparison to list interface where computation results are first saved and are returned only at the end, “yielding” could reach faster code and reduce memory usage. As a quick simulation we may use %timeit magic command in IPython with the following two functions:
** [2019-07-30] good point about separating validation and generation
:PROPERTIES:
:ID:       tgdpntbtsprtngvldtnndgnrtn
:END:
* [#B] AST ~ast.dump(ast.parse("'a' in 'aa' in 'aaa'"))~
:PROPERTIES:
:ID:       ststdmpstprsnn
:END:

* TODO [#B] use for -- else                                           :habit:
:PROPERTIES:
:CREATED:  [2018-04-23]
:ID:       ffabfd54-8b67-4639-99c8-172f57eed15e
:END:

* TODO [#B] [2018-06-18] log optimizers i used
:PROPERTIES:
:ID:       mnlgptmzrssd
:END:
* [#B] [2018-06-11] optimizing python CLI tools https://files.bemusement.org/talks/OSDC2008-FastPython/
:PROPERTIES:
:ID:       mnptmzngpythncltlssflsbmsmntrgtlkssdcfstpythn
:END:
interpreter -- about 10ms
lazy imports
profile slow imports
* TODO [#B] parser.add_argument('rest, nargs=argparse.REMAINDER)      :habit:
:PROPERTIES:
:CREATED:  [2018-07-18]
:ID:       14751572-f3a1-45b6-8085-36fdb1923000
:END:
process remaining arguments



* [#B] awesome-python https://github.com/vinta/awesome-python
:PROPERTIES:
:CREATED:  [2018-06-21]
:ID:       wsmpythnsgthbcmvntwsmpythn
:END:
attrs -- could be interesting... might solve stupid namedtuple addition etc.
https://github.com/python-attrs/attrs

This gives you the power to use actual classes with actual types in your code instead of confusing tuples or confusingly behaving namedtuples. Which in turn encourages you to write small classes that do one thing well. Never again violate the single responsibility principle just because implementing __init__ et al is a painful drag.

** should definitely subscribe to its feed and go through again
:PROPERTIES:
:ID:       shlddfntlysbscrbttsfdndgthrghgn
:END:
** TODO https://github.com/vinta/awesome-python#command-line-tools
:PROPERTIES:
:ID:       sgthbcmvntwsmpythncmmndlntls
:END:
** TODO pretty cool https://github.com/timofurrer/try
:PROPERTIES:
:ID:       prttyclsgthbcmtmfrrrtry
:END:
** TODO cool https://github.com/dbcli/mycli
:PROPERTIES:
:ID:       clsgthbcmdbclmycl
:END:
** TODO hmm try that? http://docopt.org/
:PROPERTIES:
:ID:       hmmtrythtdcptrg
:END:
** TODO some of these for nutrino? https://github.com/vinta/awesome-python#database
:PROPERTIES:
:ID:       smfthsfrntrnsgthbcmvntwsmpythndtbs
:END:
** TODO hmm that's interesting, visual scraping https://github.com/scrapinghub/portia
:PROPERTIES:
:ID:       hmmthtsntrstngvslscrpngsgthbcmscrpnghbprt
:END:
** TODO https://www.reddit.com/r/coolgithubprojects/
:PROPERTIES:
:ID:       swwwrddtcmrclgthbprjcts
:END:
** TODO ?? https://python.libhunt.com/
:PROPERTIES:
:ID:       spythnlbhntcm
:END:

* TODO [#B] do not use replace tzinfo, always localize..              :habit:
:PROPERTIES:
:CREATED:  [2018-12-31]
:ID:       bec3d732-7cf1-4a8d-8c21-1a298df7731c
:END:
* [#B] [2019-01-01] multiline string -- lstrip('\n') for nicer formatting!
:PROPERTIES:
:ID:       tmltlnstrnglstrpnfrncrfrmttng
:END:
* [#B] [2019-03-20] Tweet from Vladislav Isenbaev (@isenbaev), at Mar 20, 03:48: pickle просто скотски медленный, если что - кратно медленнее даже json'а
:PROPERTIES:
:ID:       wdtwtfrmvldslvsnbvsnbvtmrтократномедленнеедажеjsnа
:END:
https://twitter.com/isenbaev/status/1108213595920166912

* [#B] [2019-08-11] multiprocessing vs multithreading vs asyncio in Python 3.4 - Stack Overflow :concurrency:performance:
:PROPERTIES:
:ID:       snmltprcssngvsmltthrdngvssyncnpythnstckvrflw
:END:
https://stackoverflow.com/questions/27435284/multiprocessing-vs-multithreading-vs-asyncio-in-python-3-4
: if io_bound:
:     if io_very_slow:
:         print("Use Asyncio")
:     else:
:         print("Use Threads")
: else:
:     print("Multi Processing")
* [#B] [2020-01-03] adamchainz/patchy: Patch the inner source of python functions at runtime. :lisp:
:PROPERTIES:
:ID:       frdmchnzptchyptchthnnrsrcfpythnfnctnstrntm
:END:
https://github.com/adamchainz/patchy#patchy
: Patch the inner source of python functions at runtime.
* TODO [#C] [2019-12-31] PyPy.js: Python in the web browser | Hacker News :js:webext:
:PROPERTIES:
:ID:       tpypyjspythnnthwbbrwsrhckrnws
:END:
https://news.ycombinator.com/item?id=17819138
* [#C] [2018-06-22] ~difflib.unified_diff~ is suuuuper slow...
:PROPERTIES:
:ID:       frdfflbnfddffssprslw
:END:
* [#C] [2018-04-21] scrapy debugging                                 :scrapy:
:PROPERTIES:
:ID:       stscrpydbggng
:END:
scrapy shell

with_secrets scrapy shell

from scrapy.http import FormRequest
request=FormRequest(url='http://www.quantified-mind.com/login',formdata={'Email': USER,'Password':PASSWORD,})
fetch(request) -- redirects by default

sets response variable

you can do view(response) to view in browser
mind that it might be different from browsing in chrome. because of user agent?


* [#C] [2018-08-30] python's for..else makes in 'syntactially' look like a total function
:PROPERTIES:
:ID:       thpythnsfrlsmksnsyntctllylklkttlfnctn
:END:
* [#C] NamedTuple
:PROPERTIES:
:ID:       nmdtpl
:END:
** use ~typing.NamedTuple~
:PROPERTIES:
:ID:       stypngnmdtpl
:END:
** watch out for default __add__ and __mul__, it acts as adding pairs
:PROPERTIES:
:ID:       wtchtfrdfltddndmltctssddngprs
:END:
** you can't easily overload __init__, so make types of fields robust. Use a helper method instead
:PROPERTIES:
:ID:       ycntslyvrldntsmktypsffldsrbstshlprmthdnstd
:END:
def N(*args, **kwargs):
   reurn NamedTuple(whatevs)

* [#C] Use contextmanager
:PROPERTIES:
:ID:       scntxtmngr
:END:
- @contextmanager; prepare; yield exactly once, then shutdown
- ~contextlib.redirect_stdout~
  meh. I think it patches sys module? so it redirects sys.stdout calls only; but  not all stdout

* [#C] [2018-12-08] get current function/method name
:PROPERTIES:
:ID:       stgtcrrntfnctnmthdnm
:END:
def fname():
    import inspect
    return inspect.stack()[1][3]
* TODO [#C] traitlets?
:PROPERTIES:
:CREATED:  [2019-04-13]
:ID:       trtlts
:END:
* [#C] [2019-04-30] [[https://reddit.com/r/flask/comments/9ort38/whats_the_difference_between_marshmallow_and/e7w8ror/][What's the difference between marshmallow and sql-alchemy?]] /r/flask
:PROPERTIES:
:ID:       tsrddtcmrflskcmmntsrtwhtswnmrshmllwndsqllchmyrflsk
:END:
:  Marshmallow “converts” (deserializes) dicts to SQLAlchemy models or serializes SQLAlchemy models to dicts.
:  SQLAlchemy is an ORM. It maps database schema (tables) and data to Python objects.
:  The two packages complement each other. They cannot and do not replace each others’ functionality.
:  Flask-Marshmallow gives you a convenient interface to Marshmallow under Flask.
* [#C] [2019-06-29] dominatepp/.travis.yml at master · karlicoss/dominatepp :ci:
:PROPERTIES:
:ID:       stdmntpptrvsymltmstrkrlcssdmntpp
:END:
https://github.com/karlicoss/dominatepp/blob/master/.travis.yml
hmm, minimalistic travis is not so bad..
* [#C] [2019-08-12] use ~re.VERBOSE~ for inline comments in regexes
:PROPERTIES:
:ID:       mnsrvrbsfrnlncmmntsnrgxs
:END:
* [#C] [2019-10-21] python - What do (lambda) function closures capture? - Stack Overflow :plt:
:PROPERTIES:
:ID:       mnpythnwhtdlmbdfnctnclsrscptrstckvrflw
:END:
https://stackoverflow.com/questions/2295290/what-do-lambda-function-closures-capture
: Scoping in Python is dynamic and lexical. A closure will always remember the name and scope of the variable, not the object it's pointing to.
* [#C] [2019-09-27] Python Negatypes • Hillel Wayne                  :typing:
:PROPERTIES:
:ID:       frpythnngtypshlllwyn
:END:
https://www.hillelwayne.com/post/negatypes/

* [#C] [2019-12-30] argparse — Parser for command-line options, arguments and sub-commands — Python 3.8.1 documentation
:PROPERTIES:
:ID:       mnrgprsprsrfrcmmndlnptnsrntsndsbcmmndspythndcmnttn
:END:
https://docs.python.org/3/library/argparse.html
: metavar - A name for the argument in usage messages.
* [#C] [2020-01-07] Performance — python-rapidjson 0.4 documentation   :json:
:PROPERTIES:
:ID:       tprfrmncpythnrpdjsndcmnttn
:END:
https://python-rapidjson.readthedocs.io/en/latest/benchmarks.html
ok, so loads speedups are not that significant for my purposes
* [#C] [2019-07-19] python - Argparse: Way to include default values in '--help'? - Stack Overflow
:PROPERTIES:
:ID:       frpythnrgprswytnclddfltvlsnhlpstckvrflw
:END:
https://stackoverflow.com/questions/12151306/argparse-way-to-include-default-values-in-help/18507871#18507871
: Add '%(default)' to the help parameter to control what is displayed.
* [#D] [2019-12-31] PyPy - packages http://packages.pypy.org           :pypy:
:PROPERTIES:
:ID:       tpypypckgspckgspypyrg
:END:

* [#D] Construct: kinda like struct but better? https://construct.readthedocs.io/en/latest/ :parsing:
:PROPERTIES:
:ID:       cnstrctkndlkstrctbtbttrscnstrctrdthdcsnltst
:END:
* [#D] Pyrser: grammars? https://pythonhosted.org/pyrser/           :parsing:
:PROPERTIES:
:ID:       pyrsrgrmmrsspythnhstdrgpyrsr
:END:
* [#D] [2019-07-21] kython@git+https://github.com/karlicoss/kython.git@master dependency for setup.cfg :pip:
:PROPERTIES:
:ID:       snkythngtsgthbcmkrlcsskythngtmstrdpndncyfrstpcfg
:END:

* TODO [#D] [2018-07-22] PyCon 2018 Talk Videos : Python https://www.reddit.com/r/Python/comments/8j4ep6/pycon_2018_talk_videos/ :towatch:
:PROPERTIES:
:ID:       snpycntlkvdspythnswwwrddtmrpythncmmntsjppycntlkvds
:END:

* [#D] [2019-08-02] Basic usage — tox 3.13.3.dev13 documentation
:PROPERTIES:
:ID:       frbscsgtxdvdcmnttn
:END:
https://tox.readthedocs.io/en/latest/example/basic.html#integration-with-setup-py-test-command
: As the python eco-system rather moves away from using setup.py as a tool entry point it’s maybe best to not go for any setup.py test integration.
* TODO [#D] [2018-06-12] if there is a 'main.py' in script dir, it gets imported -- wtf????
:PROPERTIES:
:ID:       tfthrsmnpynscrptdrtgtsmprtdwtf
:END:
(while debugging telegram2org)
* [#D] [2019-07-20] concurrent.futures https://docs.python.org/3.7/library/concurrent.futures.html?highlight=processpoolexecutor use ~map~
:PROPERTIES:
:ID:       stcncrrntftrssdcspythnrglhtmlhghlghtprcssplxctrsmp
:END:
* [#D] [2019-08-11] PyCQA/pyflakes: A simple program which checks Python source files for errors
:PROPERTIES:
:ID:       snpycqpyflkssmplprgrmwhchchckspythnsrcflsfrrrrs
:END:
https://github.com/PyCQA/pyflakes
: Pyflakes makes a simple promise: it will never complain about style, and it will try very, very hard to never emit false positives.
: Pyflakes is also faster than Pylint or Pychecker. This is largely because Pyflakes only examines the syntax tree of each file individually. As a consequence, Pyflakes is more limited in the types of things it can check.
* [#D] [2019-08-02] posargs are needed to passing adhoc args, e.g.      :tox:
:PROPERTIES:
:ID:       frpsrgsrnddtpssngdhcrgsg
:END:
https://tox.readthedocs.io/en/latest/example/general.html#interactively-passing-positional-arguments
* [#D] [2018-04-17] some misc notes
:PROPERTIES:
:ID:       tsmmscnts
:END:
: ## Print with @padding
: `print("{:>d}{}".fomat(i, a[i]))` prints i aligned to at least two spaces as a decimal.
: 
: ## Infinite dict
: ~~~ { .python }
: infinite_defaultdict = lambda: defaultdict(infinite_defaultdict)
: d = infinite_defaultdict()
: d['x']['y']['z'] = 10
: ~~~
: 
: ## Web server
: to start a webserver to serve files from your current dir: python -m SimpleHTTPServer
: 
: @enums
: 
: ## Enums
: from enum import Enum
: class Fruit(Enum):
:     APPLE = 0
:     ORANGE = 1
: 
: ## Generating @random color
: color = "#%06x" % random.randint(0, 0xFFFFFF)
: 
: 
: python setup.py install --force
: 
: #singleton
: @singleton
: def singleton(cls):
:     instances = {}
: 
:     def get_instance():
:         if cls not in instances:
:             instances[cls] = cls()
:     return instances[cls]
: 
: return get_instance
: TODO tbh, easier with lru_cache(1)?


* ~from http import HTTPStatus~
:PROPERTIES:
:ID:       frmmprtstts
:END:

* [2018-01-21] use nonlocal instead of global                         :habit:
:PROPERTIES:
:ID:       4475cae4-cb32-4a4b-a3ec-78a9af79f8c0
:END:

* TODO !r formatter                                                   :habit:
:PROPERTIES:
:CREATED:  [2019-02-04]
:ID:       59eeb485-f5a6-45a7-b6a3-c1865807f5c4
:END:
* [2019-04-22] yield is often preferrable because python doesn't have bindings in generators
:PROPERTIES:
:ID:       mnyldsftnprfrrblbcspythndsnthvbndngsngnrtrs
:END:
* [2019-05-01] there is a difference between returning generator and yield from generator. the latter keeps scope, which might be useful if you have open files
:PROPERTIES:
:ID:       wdthrsdffrncbtwnrtrnnggnrsscpwhchmghtbsflfyhvpnfls
:END:
* DONE [#C] [2019-07-30] To yield or not to yield                 :decorator:
:PROPERTIES:
:ID:       ttyldrnttyld
:END:
https://barahilia.github.io/blog/computers/2017/01/04/to-yield-or-not-to-yield.html
hmm. if I decorate function with list constructor, I can get both ease of use and yield in function's body
** [2019-07-30] huh, some things are mentioned in the original post actually
:PROPERTIES:
:ID:       thhsmthngsrmntndnthrgnlpstctlly
:END:


* CANCEL [#C] use putup (pyscaffold) for project generation           :habit:
:PROPERTIES:
:CREATED:  [2018-10-04]
:ID:       7a5c49fc-6367-47f7-9333-375e1b3274cc
:END:
* WAIT [#D] Poetry instead of pyscaffold?                            :python:
:PROPERTIES:
:CREATED:  [2019-12-08]
:ID:       ptrynstdfpyscffld
:END:
: The best answer in 2020 is to use poetry.
: http://poetry.eustace.io
** [2021-01-16] eh, don't think it worked for me, I prefer to rely on setup.py
:PROPERTIES:
:ID:       sthdntthnktwrkdfrmprfrtrlynstppy
:END:

* [#C] [2019-08-25] https://docs.python.org/3.7/library/argparse.html argparse: use ~set_defaults~
:PROPERTIES:
:ID:       snsdcspythnrglbrryrgprshtmlrgprssstdflts
:END:
: One particularly effective way of handling sub-commands is to combine the use of the add_subparsers() method with calls to set_defaults() so that each subparser knows which Python function it should execute. For example:
: This way, you can let parse_args() do the job of calling the appropriate function after argument parsing is complete. Associating functions with actions like this is typically the easiest way to handle the different actions for each of your subparsers. However, if it is necessary to check the name of the subparser that was invoked, the dest keyword argument to the add_subparsers() call will work:
** [2019-09-02] ah, could pass lambda to forward to actual handler function!
:PROPERTIES:
:ID:       mnhcldpsslmbdtfrwrdtctlhndlrfnctn
:END:

* TODO [#C] generate_ordering?                                       :python:
:PROPERTIES:
:CREATED:  [2019-07-29]
:ID:       gnrtrdrng
:END:
* TODO [#B] [2020-07-05] [[https://stackoverflow.com/questions/384076/how-can-i-color-python-logging-output][How can I color Python logging output? - Stack Overflow]] :logging:kython:
:PROPERTIES:
:ID:       snsstckvrflwcmqstnshwcnclclrpythnlggngtptstckvrflw
:END:
: 2020 code, no additional packages required, Python 3
* TODO [#B] [2020-02-16] Direct URL PEP 508 support and installing sub-dependencies from Git · Issue 5566 · pypa/pip :pip:
:PROPERTIES:
:ID:       sndrctrlppspprtndnstllngsbdpndncsfrmgtsspyppp
:END:
https://github.com/pypa/pip/issues/5566#issuecomment-402417467
: We disabled the ability to use PEP 508 URL requirements in dependencies, since we don't want that a package installed from PyPI to result in the pip reaching out to an arbitary web URL. Basically, pip install spam should not make pip reach out to anything except PyPI.
* [#B] [2020-02-16] Allow direct urls in install_requires · Issue 6301 · pypa/pip :python:
:PROPERTIES:
:ID:       snllwdrctrlsnnstllrqrssspyppp
:END:
https://github.com/pypa/pip/issues/6301
: ugh. so I can't have URL dependencies if it's meant to be on pypi???
* TODO [#C] [2019-07-25] rstojnic/lazydata: Lazydata: Scalable data dependencies for Python projects
:PROPERTIES:
:ID:       thrstjnclzydtlzydtsclbldtdpndncsfrpythnprjcts
:END:
https://github.com/rstojnic/lazydata
** [2020-03-27] so it kinda keeps textual 'submodules' for data??
:PROPERTIES:
:ID:       frstkndkpstxtlsbmdlsfrdt
:END:

* TODO [#C] using pytest fixtures to inject stuff into the module :python:pytest:
:PROPERTIES:
:CREATED:  [2019-08-02]
:ID:       sngpytstfxtrstnjctstffntthmdl
:END:
** [2019-08-02] like in tz provider
:PROPERTIES:
:ID:       frlkntzprvdr
:END:
* STRT [#C] end2end gui semi manual tests          :promnesia:python:testing:
:PROPERTIES:
:CREATED:  [2019-08-06]
:ID:       ndndgsmmnltsts
:END:
* TODO [#C] pytest dependencies                                      :python:
:PROPERTIES:
:CREATED:  [2019-09-27]
:ID:       pytstdpndncs
:END:
py, more-itertools, zipp, importlib-metadata, pluggy, six, pyparsing, packaging, atomicwrites, wcwidth, attrs, pytest, orger
* TODO [#C] [2019-12-31] backoff · PyPI
:PROPERTIES:
:ID:       tbckffpyp
:END:
https://pypi.org/project/backoff/
: It is also possible to specify an alternate logger with the logger keyword argument. If a string value is specified the logger will be looked up by name.
* STRT [#D] Poetry for dep management                                :python:
:PROPERTIES:
:CREATED:  [2019-12-13]
:ID:       ptryfrdpmngmnt
:END:
: We have moved our dependency management from pipenv to poetry and hasn’t been more happier than now working with and publish Python modules.
: Now we use pyenv with poetry to run all our projects in Python with venv in project instead of decided by poetry default settings. We changed the settings with:
: poetry config settings.virtualenvs.in-project true After this in hgignore or gitignore added .venv folder.
: Now everything is the way we wanted, with Pipenv many times faced issues that the project worked with requirements.txt but not in Pipenv. Didn’t have this issue moving to poetry yet.
: Also with emacs support and automated deployment tools the predictability of poetry made our team easy to work with and publish Python application modules.

* [#D] [2019-12-15] Support automatic versioning setuptools_scm-style? · Issue 140 · python-poetry/poetry
:PROPERTIES:
:ID:       snspprttmtcvrsnngstptlsscmstylsspythnptryptry
:END:
https://github.com/python-poetry/poetry/issues/140
: right, poetry can't infer version...
* TODO [#D] it's clearly not detecting changes in ~install_requires~; needed to reinsall :tox:
:PROPERTIES:
:CREATED:  [2019-08-02]
:ID:       tsclrlyntdtctngchngsnnstllrqrsnddtrnsll
:END:
* [#D] [2019-07-26] python - pytest exits with no error but with "collected 0 items" - Stack Overflow :pytest:
:PROPERTIES:
:ID:       frpythnpytstxtswthnrrrbtwthcllctdtmsstckvrflw
:END:
https://stackoverflow.com/questions/37353960/pytest-exits-with-no-error-but-with-collected-0-items
: pytest gathers tests according to a naming convention. By default any file that is to contain tests must be named starting with test_ and any function in a file that should be treated as a test must also start with test_.
* TODO [#D] [2019-10-26] traceback — Print or retrieve a stack traceback — Python 3.8.0 documentation :errors:
:PROPERTIES:
:ID:       sttrcbckprntrrtrvstcktrcbckpythndcmnttn
:END:
https://docs.python.org/3/library/traceback.html#tracebackexception-objects
: TracebackException Objects

hmm, could use that?
* TODO [#C] separate testing and linting since mypy's deps might be installed by accident? :python:tox:
:PROPERTIES:
:CREATED:  [2019-09-26]
:ID:       sprttstngndlntngsncmypysdpsmghtbnstlldbyccdnt
:END:
* [#C] [2019-11-09] python - Run an OLS regression with Pandas Data Frame - Stack Overflow
:PROPERTIES:
:ID:       stpythnrnnlsrgrssnwthpndsdtfrmstckvrflw
:END:
https://stackoverflow.com/questions/19991445/run-an-ols-regression-with-pandas-data-frame
: I think you can almost do exactly what you thought would be ideal, using the statsmodels package which was one of pandas' optional dependencies before pandas' version 0.20.0 (it was used for a few things in pandas.stats.)
* TODO [#C] figure out a better framework for python multiprocessing... :python:
:PROPERTIES:
:CREATED:  [2019-06-20]
:ID:       fgrtbttrfrmwrkfrpythnmltprcssng
:END:
* TODO [#C] [2019-09-01] vinta/awesome-python: A curated list of awesome Python frameworks, libraries, software and resources :tui:
:PROPERTIES:
:ID:       snvntwsmpythncrtdlstfwsmpnfrmwrkslbrrssftwrndrsrcs
:END:
https://github.com/vinta/awesome-python
: urwid - A library for creating terminal GUI applications with strong support for widgets, events, rich colors, etc.
* STRT [#C] sigh... don't think it's possible to properly preserve stacktraces... :python:errors:
:PROPERTIES:
:CREATED:  [2020-11-25]
:ID:       sghdntthnktspssbltprprlyprsrvstcktrcs
:END:
: import logging
: logging.basicConfig()
: 
: def bad():
:     raise RuntimeError('BAD')
: 
: xx = RuntimeError('while running "test"')
: ex = None
: try:
:     bad()
: except Exception as e:
:     ex = e
:     ex.__cause__ = xx
:     logging.error('inside!')
:     logging.exception(ex)
: 
: logging.error('outside! note the empty stacktrace :(')
: logging.exception(ex)
: logging.error("also __cause__ is ignored even though it's present: '%s'", ex.__cause__)
: # I guess it just doesn't use __cause__, only traceback information...
: 
: test()
* STRT [#C] strptime is incapable of handling timezones via %Z direcive?? :python:timezone:
:PROPERTIES:
:CREATED:  [2018-10-06]
:ID:       strptmsncpblfhndlngtmznsvzdrcv
:END:
: In [20]: ds = "Sep 18 2018 5:48:23 UTC"
: 
: In [21]: _TIME_FORMAT = "%b %d %Y %H:%M:%S %Z"
: 
: In [22]: datetime.strptime(ds, _TIME_FORMAT)
: Out[22]: datetime.datetime(2018, 9, 18, 5, 48, 23)


fucking hell..
** [2020-03-27] see takeout provider
:PROPERTIES:
:ID:       frstktprvdr
:END:

* [#C] [2020-03-12] encode/httpx: A next generation HTTP client for Python. 🦋
:PROPERTIES:
:ID:       thncdxnxtgnrtnclntfrpythn
:END:
https://github.com/encode/httpx
: HTTPX is a fully featured HTTP client for Python 3, which provides sync and async APIs, and support for both HTTP/1.1 and HTTP/2.
* TODO [#C] [2020-09-02] [[https://python-prompt-toolkit.readthedocs.io/en/master/index.html][Python Prompt Toolkit 3.0 — prompt_toolkit 3.0.2 documentation]] :tui:python:
:PROPERTIES:
:ID:       wdspythnprmpttlktrdthdcsnprmpttlktprmpttlktdcmnttn
:END:
* [2020-09-18] [[https://stackoverflow.com/questions/29284244/python-tox-install-a-dependency-as-editable][testing - Python/tox Install a dependency as editable - Stack Overflow]] :python:tox:pip:
:PROPERTIES:
:ID:       frsstckvrflwcmqstnspythntstlldpndncysdtblstckvrflw
:END:
how to install a dependency as editable
* [2020-09-18] [[https://stackoverflow.com/questions/29284244/python-tox-install-a-dependency-as-editable][testing - Python/tox Install a dependency as editable - Stack Overflow]] :hpi:
:PROPERTIES:
:ID:       frsstckvrflwcmqstnspythntstlldpndncysdtblstckvrflw
:END:
add this to developer guide.. fucking hell
* [2020-09-27] [[https://stackoverflow.com/questions/41573587/what-is-the-difference-between-venv-pyvenv-pyenv-virtualenv-virtualenvwrappe][python - What is the difference between venv, pyvenv, pyenv, virtualenv, virtualenvwrapper, pipenv, etc? - Stack Overflow]]
:PROPERTIES:
:ID:       snsstckvrflwcmqstnswhtsthrtlnvwrpprppnvtcstckvrflw
:END:
: pipenv- like venv - can be used to create virtual envelopes but additionally rolls-in package management and vulnerability checking functionality. Instead of using requirements.txt, pipenv delivers package management via Pipfile. As PyPA endorses pipenv for PACKAGE MANAGEMENT, that would seem to imply pipfile is to supplant requirements.txt.
: 
: HOWEVER: pipenv uses virtualenv as its tool for creating virtual envelopes, NOT venv which is endorsed by PyPA as the go-to tool for creating virtual envelopes.
* [#C] adapter thigs with getattr (like in workout provider for org notes) -- pretty great for adding one missing method :python:
:PROPERTIES:
:CREATED:  [2018-10-27]
:ID:       dptrthgswthgtttrlknwrktprsprttygrtfrddngnmssngmthd
:END:
* TODO [#C] [2019-08-25] argparseweb · PyPI
:PROPERTIES:
:ID:       snrgprswbpyp
:END:
https://pypi.org/project/argparseweb

* STRT [#C] [2019-09-01] vinta/awesome-python: A curated list of awesome Python frameworks, libraries, software and resources :cli:
:PROPERTIES:
:ID:       snvntwsmpythncrtdlstfwsmpnfrmwrkslbrrssftwrndrsrcs
:END:
https://github.com/vinta/awesome-python
: Command-line Interface Development
: Libraries for building command-line applications.
:     Command-line Application Development
* TODO [#B] [2019-08-02] GrahamDumpleton/wrapt: A Python module for decorators, wrappers and monkey patching.
:PROPERTIES:
:ID:       frgrhmdmpltnwrptpythnmdlfrdcrtrswrpprsndmnkyptchng
:END:
https://github.com/GrahamDumpleton/wrapt
:  It therefore goes way beyond existing mechanisms such as functools.wraps() to ensure that decorators preserve introspectability, signatures, type checking abilities etc. Th
* TODO attemt to figure out mixed sem/cal versioning            :project:pip:
:PROPERTIES:
:CREATED:  [2020-04-17]
:ID:       ttmttfgrtmxdsmclvrsnng
:END:
https://github.com/pypa/setuptools_scm/#default-versioning-scheme
: def semcal(v):
:     tag = v.tag.base_version
:     assert len(tag.split('.')) == 2, tag
:     v.time
:     # tag is
:     breakpoint()
:     pass
: 
: 
: if __name__ == '__main__':
:     [pkg] = find_packages('src')
:     setup(
:         name=pkg,
:         # version='0.1.1',
:         # use_scm_version=True,
:         use_scm_version={
:             'version_scheme': semcal,
:         },
:         setup_requires=['setuptools_scm'],
* TODO had to remore username from hatch config? it was overriding __token__ during the release.. :pypi:
:PROPERTIES:
:CREATED:  [2020-04-01]
:ID:       hdtrmrsrnmfrmhtchcnfgtwsvrrdngtkndrngthrls
:END:
* [2020-03-31] why it is hard -- if you have 2fa you can't upload packages :pypi:
:PROPERTIES:
:ID:       twhytshrdfyhvfycntpldpckgs
:END:
** [2020-03-31] ah ok, actually it allows for a token, so even better!
:PROPERTIES:
:ID:       thkctllytllwsfrtknsvnbttr
:END:
* [#D] [2019-12-15] tox support python-poetry/poetry
:PROPERTIES:
:ID:       sntxspprtpythnptryptry
:END:
https://github.com/python-poetry/poetry/issues/222
: For now, you can use poetry with tox by using something similar to what I did in pendulum: https://github.com/sdispater/pendulum/blob/master/tox.ini
* TODO [#C] find_packages in setup.py?                               :python:
:PROPERTIES:
:CREATED:  [2019-12-08]
:ID:       fndpckgsnstppy
:END:

: Although, beware that you may need to change `find_packages()` to `find_namespace_packages()` in your setup.py.
: I get burned by that one a lot!

* TODO [#C] eee                                                     :ipython:
:PROPERTIES:
:CREATED:  [2019-04-14]
:ID:       34009_34472
:END:

:  ldisplay_md("hi")
:  TODO shit. try and work on it?
:  also provide these as utils..
:  from IPython.display import display, Latex
:  display(Markdown("Heat equation:"), heat_eq)
:  display(Markdown("Boundary conditions:"))
:  display(Latex(r"\begin{cases} x \\ y \end{cases}"), bc_left, bc_right)
:  display(Markdown('hi'))
:  That doesn't look great. `display` is quoting plain
* CANCEL [#C] [2019-09-01] KoffeinFlummi/Chronyk: A Python 3 library for parsing human-written times and dates
:PROPERTIES:
:ID:       snkffnflmmchrnykpythnlbrryfrprsnghmnwrttntmsnddts
:END:
https://github.com/KoffeinFlummi/Chronyk

* [#D] [2019-11-17] sampleproject/setup.py at master · pypa/sampleproject
:PROPERTIES:
:ID:       snsmplprjctstppytmstrpypsmplprjct
:END:
https://github.com/pypa/sampleproject/blob/master/setup.py
:     # This field corresponds to the "Description-Content-Type" metadata field:
:     # https://packaging.python.org/specifications/core-metadata/#description-content-type-optional
:     long_description_content_type='text/markdown',  # Optional (see note above)
* TODO [#C] nicer attribute errors                                   :python:
:PROPERTIES:
:CREATED:  [2020-09-02]
:ID:       ncrttrbtrrrs
:END:
: AttributeError: unexpected attribute 'color' to Line, similar attributes are line_color
** [#B] would be nice to do this hpi:
:PROPERTIES:
:ID:       wldbnctdthshp
:END:
* TODO [#D] [2019-07-25] pytest-profiling · PyPI
:PROPERTIES:
:ID:       thpytstprflngpyp
:END:
https://pypi.org/project/pytest-profiling/

* TODO [#D] Poetry easy pip publishing
:PROPERTIES:
:CREATED:  [2019-12-13]
:ID:       ptrysypppblshng
:END:
: Even putting aside it's approach to dependency management, Poetry has a fond place in my heart for making it so much easier to publish to PyPI.
: If poetry did nothing but simply the process of publishing and updating python packages, it would still be an amazing tool.

* TODO [#C] use quit instead of close?                             :selenium:
:PROPERTIES:
:CREATED:  [2019-10-08]
:ID:       sqtnstdfcls
:END:
* [#C] [2020-10-06] [[https://brython.info/][Brython]]           :python:web:
:PROPERTIES:
:ID:       tsbrythnnfbrythn
:END:
: Speed of execution is similar to CPython for most operations.
* TODO [#C] [2020-01-09] logzero: Python logging made easy — logzero 1.5.0 documentation
:PROPERTIES:
:ID:       thlgzrpythnlggngmdsylgzrdcmnttn
:END:
https://logzero.readthedocs.io/en/latest/
: logzero.setup_logger(name=None, logfile
* TODO [#D] marshmallow for db handling looks interesting...         :python:
:PROPERTIES:
:CREATED:  [2018-05-07]
:ID:       mrshmllwfrdbhndlnglksntrstng
:END:

https://github.com/marshmallow-code/marshmallow
zoopla/zoopla/schemas.py

* TODO [#D] PandaPy
:PROPERTIES:
:CREATED:  [2020-01-25]
:ID:       pndpy
:END:

: PandaPy has the speed of NumPy and the usability of Pandas - https://news.ycombinator.com/item?id=22142869

* [#D] [2019-10-27] Ability to execute certain tests sequentially while using -n (xdist) · Issue #385 · pytest-dev/pytest-xdist
:PROPERTIES:
:ID:       snbltytxctcrtntstssqntllyngnxdstsspytstdvpytstxdst
:END:
https://github.com/pytest-dev/pytest-xdist/issues/385
: Isn't this enough?
: py.test -m sequential
: py.test -m "non sequential" -n8
* [#D] [2019-10-27] pylint exceed maximum recursion depth · Issue #2388 · PyCQA/pylint
:PROPERTIES:
:ID:       snpylntxcdmxmmrcrsndpthsspycqpylnt
:END:
https://github.com/PyCQA/pylint/issues/2388
: Thanks for the tip. I actually had that setting before and still keep it on. --extension-pkg-whitelist=numpy
: However, after upgrading to later versions of python and pylint and astroid I no longer have the issue even with the numpy whitelist setting.
: Python 3.7.1
: pylint 2.3.1
: astroid 2.2.5
* [#D] [2019-10-27] Search pylint configuration in setup.cfg and pyproject.toml · Issue #617 · PyCQA/pylint
:PROPERTIES:
:ID:       snsrchpylntcnfgrtnnstpcfgndpyprjcttmlsspycqpylnt
:END:
https://github.com/PyCQA/pylint/issues/617#event-2701192212
: Search pylint configuration in setup.cfg and pyproject.toml
* TODO [#D] [2019-11-08] How do I use regex in a SQLite query? - Stack Overflow :sqlite:
:PROPERTIES:
:ID:       frhwdsrgxnsqltqrystckvrflw
:END:
https://stackoverflow.com/questions/5071601/how-do-i-use-regex-in-a-sqlite-query
: With python, assuming con is the connection to SQLite, you can define the required UDF by writing:
: con.create_function('regexp', 2, lambda x, y: 1 if re.search(x,y) else 0)
* [#D] -pdbcls=IPython.terminal.debugger:TerminalPdb --pdb :python:ipython:debug:
:PROPERTIES:
:CREATED:  [2019-10-13]
:ID:       pdbclspythntrmnldbggrtrmnlpdbpdb
:END:
* TODO [#B] wonder how to make sure dataclasses are represented very effecienly? :python:
:PROPERTIES:
:CREATED:  [2019-12-28]
:ID:       wndrhwtmksrdtclsssrrprsntdvryffcnly
:END:
* TODO [#C] [2020-06-07] [[https://blog.meadsteve.dev/programming/2020/02/10/types-at-the-edges-in-python/][Types at the edges in Python – MeadSteve's Dev Blog]] :python:
:PROPERTIES:
:ID:       snsblgmdstvdvprgrmmngtypspstthdgsnpythnmdstvsdvblg
:END:
: Pydantic checks that each key I expected exists and is of the correct type. So now all the assumptions I’ve made about the shape of the data is a runtime contract, expressed in native python. If in production it turns out that description is, in fact, optional I’ll get a very descriptive error and the code will fail early.
* TODO figuring out why has the package ended up in path             :python:
:PROPERTIES:
:CREATED:  [2020-04-15]
:ID:       fgrngtwhyhsthpckgnddpnpth
:END:

: d for d in sorted(pkg_resources.working_set, key=lambda p: p.project_name)]
* [2020-12-08] [[https://hakibenita.com/python-mypy-exhaustive-checking][Exhaustiveness Checking with Mypy | Haki Benita]] :python:mypy:
:PROPERTIES:
:ID:       tshkbntcmpythnmypyxhstvchhstvnsschckngwthmypyhkbnt
:END:
: Exhaustiveness Checking

use else clause with NoReturn, then mypy assists in refining
* TODO [#C] hvplot: clever algebra on plots                           :bokeh:
:PROPERTIES:
:CREATED:  [2020-10-18]
:ID:       hvpltclvrlgbrnplts
:END:
: wow! * (same plot) vs + (different plots) is pretty clever!
: also I like how multiplication doesn't commute so the 'first' plot wins the layout parameters
* TODO [#C] [2020-04-09] naiquevin/pipdeptree: A command line utility to display dependency tree of the installed Python packages [NOT ACCEPTING PRs FOR A WHILE BECAUSE OF MAJOR REFACTORING IN ANOTHER BRANCH]
:PROPERTIES:
:ID:       thnqvnppdptrcmmndlntltytdlbcsfmjrrfctrngnnthrbrnch
:END:
https://github.com/naiquevin/pipdeptree
* [#C] [2020-04-23] [[https://github.com/pandas-dev/pandas/blob/master/setup.py][pandas/setup.py at master · pandas-dev/pandas]] :pip:
:PROPERTIES:
:ID:       thsgthbcmpndsdvpndsblbmstypndsstppytmstrpndsdvpnds
:END:
: Docum
** [2020-05-09] nice, pandas is using quite elaborate setup.py with proper documentation links
:PROPERTIES:
:ID:       stncpndsssngqtlbrtstppywthprprdcmnttnlnks
:END:
* TODO [#C] [2019-07-28] kirankoduru/scrapy-programmatically: Running scrapy spider programmatically. :scrape:
:PROPERTIES:
:ID:       snkrnkdrscrpyprgrmmtcllyrnnngscrpyspdrprgrmmtclly
:END:
https://github.com/kirankoduru/scrapy-programmatically

* [#D] [2020-04-23] [[https://github.com/karlicoss/promnesia/runs/612863976?check_suite_focus=true][detect all subpackages properly · karlicoss/promnesia@f7451c4]]
:PROPERTIES:
:ID:       thsgthbcmkrlcssprmnsrnschbpckgsprprlykrlcssprmnsfc
:END:
: tests/integration_test.py::test_example_config
:   /Users/runner/runners/2.169.1/work/promnesia/promnesia/.tox/py3/lib/python3.7/site-packages/hug/use.py:185: DeprecationWarning: invalid escape sequence \d
:     status_code = int("".join(re.findall("\d+", response.status)))
* [#D] [2020-04-05] Configs suck? Try a real programming language | Hacker News
:PROPERTIES:
:ID:       sncnfgsscktryrlprgrmmnglngghckrnws
:END:
https://news.ycombinator.com/item?id=22787332
: mjw1007 28 minutes ago [-]
: One variant of this is to use Python syntax but parse it with the `ast` module rather than evaluating it.
: This avoids the security problems and the risk that someone will start to write programs inside the configuration file, but gives you the reasonably nice and powerful syntax.
* [#C] [2020-10-14] [[https://github.com/google/python-fire][google/python-fire: Python Fire is a library for automatically generating command line interfaces (CLIs) from absolutely any Python object.]] :cli:
:PROPERTIES:
:ID:       wdsgthbcmgglpythnfrgglpytcsclsfrmbsltlynypythnbjct
:END:
: ython Fire is a library for automatically generating command line interfaces (CLIs) from absolutely any Python object.
* [#C] [2020-04-23] [[https://github.com/samuelhwilliams/Eel][samuelhwilliams/Eel: A little Python library for making simple Electron-like HTML/JS GUI apps]] :gui:
:PROPERTIES:
:ID:       thsgthbcmsmlhwllmslsmlhwlmkngsmpllctrnlkhtmljsgpps
:END:
* TODO [#C] [2020-04-15] [[https://github.com/pypa/setuptools/blob/master/setuptools/__init__.py#L80-L85][setuptools/__init__.py at master · pypa/setuptools]]
:PROPERTIES:
:ID:       wdsgthbcmpypstptlsblbmstrlstptlsntpytmstrpypstptls
:END:
why is it not including files at all??
* TODO [#C] hmm, seems like fastapi always has to be wrapped in pydantic. ugh!
:PROPERTIES:
:CREATED:  [2020-03-12]
:ID:       hmmsmslkfstplwyshstbwrppdnpydntcgh
:END:
run with uvicorn fa:app --reload --port 9090

: #!/usr/bin/env python3
: from typing import NamedTuple
: from fastapi import FastAPI
: 
: app = FastAPI()
: 
: from dataclasses import dataclass
: 
: @dataclass
: class X:
:     a: int
:     x: str
: 
: @app.get("/", response_model=X)
: async def root() -> X:
:     return X(a=123, x="fwef")
* [#B] keeping testss side by side with code                         :pytest:
:PROPERTIES:
:CREATED:  [2020-04-30]
:ID:       kpngtstsssdbysdwthcd
:END:
: import sys
: # make sure it doesn't need pytest in prod
: if 'pytest' in sys.modules:
:     import pytest # type: ignore
: else:
:     from unittest.mock import Mock
:     pytest = Mock()
* [2020-04-30] [[https://docs.python.org/3/library/pkgutil.html][pkgutil — Package extension utility — Python 3.8.3rc1 documentation]]
:PROPERTIES:
:ID:       thsdcspythnrglbrrypkgtlhtkgxtnsntltypythnrcdcmnttn
:END:
: pkgutil.extend_path(path, name)
: 
:     Extend the search path for the modules which comprise a package. Intended use is to place the following code in a package’s __init__.py:
: 
:     from pkgutil import extend_path
:     __path__ = extend_path(__path__, __name__)
: 
:     This will add to the package’s __path__ all subdirectories of directories on sys.path named after the package. This is useful if one wants to distribute different parts of a single logical package as multiple directories.
* TODO [#C] [2020-03-24] PEP 593 -- Flexible function and variable annotations | Python.org
:PROPERTIES:
:ID:       tppflxblfnctnndvrblnnttnspythnrg
:END:
https://www.python.org/dev/peps/pep-0593/
* TODO [#C] [2019-08-24] Simple dependent types in Python - DEV Community 👩‍💻👨‍💻 :mypy:python:
:PROPERTIES:
:ID:       stsmpldpndnttypsnpythndvcmmnty
:END:
https://dev.to/wemake-services/simple-dependent-types-in-python-4e14
: Now, we are going to combine our new knowledge about Literal and @overload together to solve our problem with open. At last!
* TODO [#B] [2020-07-08] [[https://news.ycombinator.com/item?id=23747133][SymPy - a Python library for symbolic mathematics | Hacker News]] :sympy:sage:
:PROPERTIES:
:ID:       wdsnwsycmbntrcmtmdsympypyrryfrsymblcmthmtcshckrnws
:END:
: As one point of comparison, SymPy is comically slow compared to Sage. This is mostly because SymPy is purely Python; Sage on the other hand uses a derivative of GiNaC [1] for its internal symbolic expression representation, and then multiple external libraries for non-trivial operations. Symbolic transformations are mostly Maxima [3]. Sage literally converts expressions to strings, pipes them through a Maxima process, and then parses the result back. This is still much faster than the pure Python SymPy.
: There is an effort to speed up SymPy core, SymEngine [3], but it's been in development for years now, and still isn't integrated into SymPy. Not sure why.
: Case in point: 'expand("(2+3x+4x*y)^60")' takes 5 seconds with SymPy; Sage does the same in 0.02 seconds.
* STRT [#B] [2020-07-26] [[https://qtconsole.readthedocs.io/en/stable/][The Qt Console for Jupyter — Jupyter Qt Console 4.7.5 documentation]]
:PROPERTIES:
:ID:       snsqtcnslrdthdcsnstblthqtfrjpytrjpytrqtcnsldcmnttn
:END:
: The Qt console is a very lightweight application that largely feels like a terminal, but provides a number of enhancements only possible in a GUI, such as inline figures, proper multi-line editing with syntax highlighting, graphical calltips, and much more. The Qt console can use any Jupyter kernel.
* [#B] [2020-10-15] [[http://farmdev.com/src/secrets/framehack/][Frame Hacks]] :python:
:PROPERTIES:
:ID:       thfrmdvcmsrcscrtsfrmhckfrmhcks
:END:

* [#B] [2019-03-17] pylint useful stuff                              :python:
:PROPERTIES:
:ID:       snpylntsflstff
:END:
: cell-var-from-loop -- can detect bad lambda capturing
:  pylint --disable='C,fixme,'
* [#C] [2020-01-26] Hypermodern Python Chapter 4: Typing · Claudio Jolowicz's website
:PROPERTIES:
:ID:       snhyprmdrnpythnchptrtypngcldjlwczswbst
:END:
https://cjolowicz.github.io/posts/hypermodern-python-04-typing/
: Typeguard is a runtime type checker for Python:
* STRT [#B] try using devpi for uploading?                              :tox:
:PROPERTIES:
:CREATED:  [2019-08-02]
:ID:       trysngdvpfrpldng
:END:
* [#C] [2020-05-25] [[https://dmerej.info/blog/post/docopt-v-argparse/][docopt v argparse • Dimitri Merejkowsky]] :python:
:PROPERTIES:
:ID:       mnsdmrjnfblgpstdcptvrgprsdcptvrgprsdmtrmrjkwsky
:END:
: But for big projects with lots of subcommands, written in Python, using argparse may be a better idea, especially if you need to do advanced stuff for your parsing, like configuring common options in one function, allow plug-ins to change the command line API, and so on …
* [#D] [2019-12-08] Dynamically change __slots__ in Python 3 - Stack Overflow :python:
:PROPERTIES:
:ID:       sndynmcllychngsltsnpythnstckvrflw
:END:
https://stackoverflow.com/questions/27907373/dynamically-change-slots-in-python-3
: Normally, an object's attributes are stored in a dict, which requires a fair bit of memory itself. If you are creating millions of objects then the space required by these dicts becomes prohibitive. __slots__ informs the python machinery that makes the class object that there will only be so many attributes refered to by instances of this class and what the names of the attributes will be. Therefore, the class can make an optimisation by storing the attributes directly on the instance rather than in a dict. It places the memory for the (pointers to the) attributes directly on the object, rather than creating a new dict for the object.
* [#C] [2020-10-24] [[https://news.ycombinator.com/item?id=24874102][LiveCode is a modern day HyperCard (2019) | Hacker News]] :python:gui:
:PROPERTIES:
:ID:       stsnwsycmbntrcmtmdlvcdsmdrndyhyprcrdhckrnws
:END:
: In the spirit of HN contrarian comments, I'd say the closest thing spiritually to a modern-day HyperCard is PySimpleGUI: https://github.com/PySimpleGUI
* [#C] [2020-01-15] [[https://news.ycombinator.com/item?id=22054433][Show HN: CrossHair – SMT Assisted Testing for Python]] :testing:python:
:PROPERTIES:
:ID:       wdsnwsycmbntrcmtmdshwhncrsshrsmtssstdtstngfrpythn
:END:
https://github.com/pschanely/CrossHair
* STRT [#B] [2019-11-10] lihaoyi/macropy: Macros in Python: quasiquotes, case classes, LINQ and more! :macro:python:lisp:
:PROPERTIES:
:ID:       snlhymcrpymcrsnpythnqsqtscsclssslnqndmr
:END:
https://github.com/lihaoyi/macropy
** [2020-05-16] wow that's amazing https://macropy3.readthedocs.io/en/latest/discussion.html#function-advice
:PROPERTIES:
:ID:       stwwthtsmzngsmcrpyrdthdcsnltstdscssnhtmlfnctndvc
:END:

* [#D] [2020-01-09] What does it do? — Logbook               :python:logging:
:PROPERTIES:
:ID:       thwhtdstdlgbk
:END:
https://logbook.readthedocs.io/en/stable/features.html#advantages-over-logging

* TODO [#C] [2019-11-24] How formulas work — patsy 0.5.1+dev documentation
:PROPERTIES:
:ID:       snhwfrmlswrkptsydvdcmnttn
:END:
https://patsy.readthedocs.io/en/latest/formulas.html
: The formula language is actually fairly simple once you get the hang of it, but if you’re ever in doubt as to what some construction means, you can always ask Patsy how it expands.
* TODO [#D] [2019-12-20] Pipenv: promises a lot, delivers very little | Chris Warrick :pip:
:PROPERTIES:
:ID:       frppnvprmssltdlvrsvrylttlchrswrrck
:END:
https://chriswarrick.com/blog/2018/07/17/pipenv-promises-a-lot-delivers-very-little/

* [2020-08-19] [[https://packaging.python.org/discussions/install-requires-vs-requirements/][install_requires vs requirements files — Python Packaging User Guide]] :pip:
:PROPERTIES:
:ID:       wdspckgngpythnrgdscssnsnsrqrmntsflspythnpckgngsrgd
:END:
: Requirements Files described most simply, are just a list of pip install arguments placed into a file.
: Whereas install_requires defines the dependencies for a single project, Requirements Files are often used to define the requirements for a complete Python environment.
: Whereas install_requires requirements are minimal, requirements files often contain an exhaustive listing of pinned versions for the purpose of achieving repeatable installations of a complete environment.
: Whereas install_requires requirements are “Abstract”, i.e. not associated with any particular index, requirements files often contain pip options like --index-url or --find-links to make requirements “Concrete”, i.e. associated with a particular index or directory of packages. 1
: Whereas install_requires metadata is automatically analyzed by pip during an install, requirements files are not, and only are used when a user specifically installs them using pip install -r.
* [2019-04-10] kynan/nbstripout: strip output from Jupyter and IPython notebooks :git:ipython:
:PROPERTIES:
:ID:       wdkynnnbstrptstrptptfrmjpytrndpythnntbks
:END:
https://github.com/kynan/nbstripout

* [2020-08-22] [[https://pauliacomi.com/2020/06/07/plotly-v-bokeh.html][Plotly vs. Bokeh: Interactive Python Visualisation Pros and Cons | Paul Iacomi]] :bokeh:viz:
:PROPERTIES:
:ID:       stsplcmcmpltlyvbkhhtmlplttvpythnvslstnprsndcnsplcm
:END:
pretty good comparizon
* [#C] hack to allow optional git dependencies                     :pip:pypi:
:PROPERTIES:
:CREATED:  [2020-04-19]
:ID:       hcktllwptnlgtdpndncs
:END:
: def building_for_pypi() -> bool:
:     return sys.argv[1] == 'sdist'
:    for_pypi = building_for_pypi()
:            'my': [] if for_pypi else ['HPI @ git+https://github.com/karlicoss/my.git'],
:        },
* [#C] [2019-11-29] typeddjango/awesome-python-typing: Collection of awesome Python types, stubs, plugins, and tools to work with them.
:PROPERTIES:
:ID:       frtypddjngwsmpythntypngclsstbsplgnsndtlstwrkwththm
:END:
https://github.com/typeddjango/awesome-python-typing
* [#C] [2020-03-14] jestem króliczkiem on Twitter: "or, you can encode dependencies in types: @dataclass(init=False) class FancyPath: path: Path mtime: float def __init__(self, path: Path): self.path = path self.mtime = path.stat().st_mtime" / Twitter :cachew:python:
:PROPERTIES:
:ID:       stjstmkrólczkmntwttrrycnnpthslfmtmpthsttstmtmtwttr
:END:
https://twitter.com/karlicoss/status/1238791294547353601
: @dataclass
: (init=False)
: class FancyPath:
:     path: Path
:     mtime: float
:     def __init__(self, path: Path):
:         self.path = path
:         self.mtime = path.stat().st_mtime

right, I suppose it's type to use dataclasses
* [#C] [2020-04-11] Traps for the Unwary in Python’s Import System — Nick Coghlan's Python Notes 1.0 documentation :python:
:PROPERTIES:
:ID:       sttrpsfrthnwrynpythnsmprtmnckcghlnspythnntsdcmnttn
:END:
http://python-notes.curiousefficiency.org/en/latest/python_concepts/import_traps.html#the-init-py-trap

* STRT [#C] [2020-05-13] [[https://github.com/amontalenti/elements-of-python-style][amontalenti/elements-of-python-style: Goes beyond PEP8 to discuss what makes Python code feel great. A Strunk & White for Python.]] :python:
:PROPERTIES:
:ID:       wdsgthbcmmntlntlmntsfpyththncdflgrtstrnkwhtfrpythn
:END:
: Use parens (...) for fluent APIs
* [#B] [2020-05-18] [[https://chrisyeh96.github.io/2017/08/08/definitive-guide-python-imports.html][The Definitive Guide to Python import Statements | Chris Yeh]] :python:
:PROPERTIES:
:ID:       mnschrsyhgthbdfntvgdpythngdtpythnmprtsttmntschrsyh
:END:

* [#B] [2020-08-09] [[https://stackoverflow.com/questions/18770504/resize-ipython-notebook-output-window][resize ipython notebook output window - Stack Overflow]]
:PROPERTIES:
:ID:       snsstckvrflwcmqstnsrszpytpythnntbktptwndwstckvrflw
:END:
: You can toggle the scroll window in the main menu of the notebook
: Cell -> Current Outputs -> Toggle Scrolling
* [#C] [2020-01-26] Not really. Enable something like MyPy or PyType on a big enough codebase with z... | Hacker News
:PROPERTIES:
:ID:       snntrllynblsmthnglkmypyrpytypnbgnghcdbswthzhckrnws
:END:
https://news.ycombinator.com/item?id=21902827
: Not really. Enable something like MyPy or PyType on a big enough codebase with zero explicit annotation and it'll already find plenty of bugs and unhandled cases from the inferred types alone. Some of these are stuff a strong IDE may catch too (using the wrong function name, passing wrong number of args, etc), but some other ones are actually deeper in the code.
: 
: So already, with zero annotations, you already get value out, let alone once you type a few tricky variables that are harder for Python to track.
* TODO [#B] [2020-07-21] [[https://github.com/tmbo/questionary][tmbo/questionary: Python library to build pretty command line user prompts ✨Easy to use multi-select lists, confirmations, free text prompts ...]] :tui:
:PROPERTIES:
:ID:       tsgthbcmtmbqstnrytmbqstnrctlstscnfrmtnsfrtxtprmpts
:END:
