#+TITLE: Personal infra
#+filetags: infra

* TODO [#B] Voice recorded notes for hands free thinking?           :mycroft:
:PROPERTIES:
:CREATED:  [2019-10-30]
:ID:       vcrcrddntsfrhndsfrthnkng
:END:

* TODO [#B] [2020-07-01] [[https://docs.docker.com/compose/extends/][Share Compose configurations between files and projects | Docker Documentation]] :docker:
:PROPERTIES:
:ID:       wdsdcsdckrcmcmpsxtndsshrctwnflsndprjctsdckrdcmnttn
:END:

* STRT [#B] attempting to overcome read-only editable packages... :python:pip:
:PROPERTIES:
:CREATED:  [2020-12-10]
:ID:       ttmptngtvrcmrdnlydtblpckgs
:END:
- this works... but doesn't if setup.py is guarded with __main__
  : import distutils.core as C; C.run_setup("setup.py", stop_after='config')

  could check for __name__ == 'builtins'... but then would need to modify all files, and might not reliably work
- can't just copy setup.py outside, because it might need .git directory for scm_version thing
  fuuck.
- adding to easy_install.pth works.. but need to figure out what's the base pkg directory...
- ok, added a hacky script to infra repo
* TODO [#C] Koreader                                             :remarkable:
:PROPERTIES:
:CREATED:  [2020-08-28]
:ID:       krdr
:END:

: For a better PDF experience, you might want to try 'koreader'. The native PDF support on my Kobo Forma was so bad I was ready to return it, before finding this. It's an open source PDF/epub reader that you can install on Remarkable and other eInk readers. It's just an app - it doesn't replace or degrade any existing functionality.
: https://github.com/koreader/koreader
* STRT [#C] Use zstd?                                               :exports:
:PROPERTIES:
:CREATED:  [2020-01-15]
:ID:       szstd
:END:

* TODO [#C] huh, huginn is pretty well documented and also very clean interface. could get inspiration from it... :inspiration:
:PROPERTIES:
:CREATED:  [2019-12-24]
:ID:       hhhgnnsprttywlldcmntdndlsryclnntrfccldgtnsprtnfrmt
:END:

* [#C] [2019-06-29] frenck/awesome-home-assistant: A curated list of amazingly awesome Home Assistant resources.
:PROPERTIES:
:ID:       stfrnckwsmhmssstntcrtdlstfmznglywsmhmssstntrsrcs
:END:
https://github.com/frenck/awesome-home-assistant
* STRT [#C] trying out podman                                 :docker:podman:
:PROPERTIES:
:CREATED:  [2020-09-15]
:ID:       tryngtpdmn
:END:
apparently can't run without the default command?
: podman-compose --file docker-compose.yml run --rm ghexport python3                                                                                                                                                     mc 12:02:53
: Traceback (most recent call last):
:   File "/home/karlicos/.local/bin/podman-compose", line 8, in <module>
:     sys.exit(main())
:   File "/home/karlicos/.local/lib/python3.8/site-packages/podman_compose.py", line 1093, in main
:     podman_compose.run()
:   File "/home/karlicos/.local/lib/python3.8/site-packages/podman_compose.py", line 624, in run
:     cmd = self.commands[cmd_name]
: TypeError: unhashable type: 'list'

here? https://github.com/containers/podman-compose/issues/24
can't see if they have a CI?
* TODO [#C] overlay mounts over read-only FS work as long there is a dir (even empty) in the src? :docker:
:PROPERTIES:
:CREATED:  [2020-10-28]
:ID:       vrlymntsvrrdnlyfswrkslngthrsdrvnmptynthsrc
:END:
e.g. create empty node_modules
* TODO [#C] it's maybe the same tag as homelab?                     :homelab:
:PROPERTIES:
:CREATED:  [2020-12-06]
:ID:       tsmybthsmtgshmlb
:END:
* TODO [#C] scripts to grab stuff from phone to other locations?      :phone:
:PROPERTIES:
:CREATED:  [2020-12-06]
:ID:       scrptstgrbstfffrmphntthrlctns
:END:
* [#C] [2020-07-07] [[https://devops.stackexchange.com/questions/6246/when-would-i-use-docker-composes-service-ports-flag][When would I use docker-compose's "--service-ports" flag? - DevOps Stack Exchange]] :docker:
:PROPERTIES:
:ID:       tsdvpsstckxchngcmqstnswhnssrvcprtsflgdvpsstckxchng
:END:
: To start the service to run in the background you use docker-compose -f <FILE> up --detach but if you wanted to look inside the container using a terminal, you would run docker-compose run bash.
* TODO [#C] [2020-05-26] [[https://brig.readthedocs.io/en/latest/][brig - decentralized & secure synchronization — brig v0.4.0-beta documentation]] :cloud:
:PROPERTIES:
:ID:       tsbrgrdthdcsnltstbrgdcntrcrsynchrnztnbrgvbtdcmnttn
:END:
: Simplified git version control only limited by your storage space.
: Synchronization algorithm that can handle moved files and empty directories and files.
: Your data does not need to be stored on the device you are currently using.
: FUSE filesystem that feels like a normal sync folder.
: No central server at all. Still, central architectures can be build with brig.
: Gateway and Web based UI to share normal HTTP/S links with other users.
: Auto-updating facility that will sync on any change.

* [#C] [2020-09-11] [[https://mycroftai.activehosted.com/index.php?action=social&chash=a666587afda6e89aec274a3657558a27.613&s=a097e7aac8da6ebed9dcda7ec603a22e][GUI, Core Update, and Dev Sync Videos!]] :mycroft:
:PROPERTIES:
:ID:       frsmycrftctvhstdcmndxphpccdbddcdcgcrpdtnddvsyncvds
:END:
: GUI now available on Ubuntu and Manjaro
: If you have Mycroft running on the latest (K)Ubuntu or Manjaro releases, you can now install the Alpha release of the Mycroft GUI powered by Qt and Kirigami. Simply use the same basic commands used to install mycroft-core.
* [#C] [2020-12-20] [[https://github.com/tulir/mautrix-facebook/wiki/Bridge-setup-with-Docker][Bridge setup with Docker · tulir/mautrix-facebook Wiki]] :matrix:
:PROPERTIES:
:ID:       snsgthbcmtlrmtrxfcbkwkbrddgstpwthdckrtlrmtrxfcbkwk
:END:
: Upgrading
:     Pull the new version (setup step 1)
:     Start the new version (setup step 7)
** TODO [2020-12-20] [[https://github.com/tulir/mautrix-facebook/wiki/Bridge-setup-with-Docker][Bridge setup with Docker · tulir/mautrix-facebook Wiki]] :matrix:
:PROPERTIES:
:ID:       snsgthbcmtlrmtrxfcbkwkbrddgstpwthdckrtlrmtrxfcbkwk
:END:
ugh. kinda annoying it's running as root
* [#D] [2019-05-16] [[https://reddit.com/r/selfhosted/comments/bmxqwd/i_made_a_selfhosted_personal_lastfm_alternative/][I made a self-hosted personal Last.fm alternative with support for custom artwork, multiple artists per track and self-defined rules for metadata correction]] /r/selfhosted :music:
:PROPERTIES:
:ID:       thsrddtcmrslfhstdcmmntsbmndrlsfrmtdtcrrctnrslfhstd
:END:

* STRT [#B] [2020-01-18] bb4242/sdnotify: A pure Python implementation of systemd's service notification protocol (sd_notify) -- can be used for watchdog? :infra:systemd:
:PROPERTIES:
:ID:       stbbsdntfyprpythnmplmnttnnprtclsdntfycnbsdfrwtchdg
:END:
https://github.com/bb4242/sdnotify
* STRT [#B] replace backoff with that other thing?             :arctee:infra:
:PROPERTIES:
:CREATED:  [2020-07-06]
:ID:       rplcbckffwththtthrthng
:END:
* TODO [#C] backups/hypothesis/hypothesis_20200705T190129Z.json is malformed. check how my infra responds to this :promnesia:infra:
:PROPERTIES:
:CREATED:  [2020-07-06]
:ID:       bckpshypthsshypthsstzjsnsfrmdchckhwmynfrrspndstths
:END:
* [#C] [2020-01-12] [[https://news.ycombinator.com/item?id=22027459][Deploy your side-projects at scale for basically nothing – Google Cloud Run]] :hpi:promnesia:project:
:PROPERTIES:
:ID:       snsnwsycmbntrcmtmddplyyrstsclfrbscllynthnggglcldrn
:END:
https://alexolivier.me/posts/deploy-container-stateless-cheap-google-cloud-run-serverless
** [2020-08-15] can deploy docker container and run?
:PROPERTIES:
:ID:       stcndplydckrcntnrndrn
:END:
* TODO [#D] figure out unmatching origin/master? always check it even without fetch?? :clustergit:
:PROPERTIES:
:CREATED:  [2018-11-27]
:ID:       fgrtnmtchngrgnmstrlwyschcktvnwthtftch
:END:
* TODO [#C] [2019-08-18] Elasticlunr.js, lightweight full-text search engine in Javascript for browser search and offline search. :search:
:PROPERTIES:
:ID:       snlstclnrjslghtwghtflltxtcrptfrbrwsrsrchndfflnsrch
:END:
http://elasticlunr.com/
I think I'm using it in scrapyroo.. perhaps I should index all my git repos?
* [#C] [2019-09-01] vinta/awesome-python: A curated list of awesome Python frameworks, libraries, software and resources :search:
:PROPERTIES:
:ID:       snvntwsmpythncrtdlstfwsmpnfrmwrkslbrrssftwrndrsrcs
:END:
https://github.com/vinta/awesome-python
: fuzzywuzzy - Fuzzy String Matching.
* TODO [#C] [2019-06-29] mark-rushakoff/awesome-influxdb: A curated list of awesome projects, libraries, tools, etc. related to InfluxDB :influx:
:PROPERTIES:
:ID:       stmrkrshkffwsmnflxdbcrtdljctslbrrstlstcrltdtnflxdb
:END:
https://github.com/mark-rushakoff/awesome-influxdb

* TODO [#C] compare how similar pipeline in python would look? :huginn:ideas:
:PROPERTIES:
:CREATED:  [2019-12-24]
:ID:       cmprhwsmlrpplnnpythnwldlk
:END:

introspection is certainly _way_ worse! dry run etc are amazing
how can we bring Python programming experience closer to this?

* TODO [#C] isso got some nice helper scripts like su-exec and tini  :docker:
:PROPERTIES:
:CREATED:  [2020-06-15]
:ID:       ssgtsmnchlprscrptslksxcndtn
:END:
* STRT [#C] figure out how to notify from phone                       :phone:
:PROPERTIES:
:CREATED:  [2020-01-25]
:ID:       fgrthwtntfyfrmphn
:END:
* STRT [#C] [2019-09-21] Friz-zy/awesome-linux-containers: A curated list of awesome Linux Containers frameworks, libraries and software :sandbox:
:PROPERTIES:
:ID:       stfrzzywsmlnxcntnrscrtdlscntnrsfrmwrkslbrrsndsftwr
:END:
https://github.com/Friz-zy/awesome-linux-containers#readme
: Sandboxes
:     Firejail is a SUID sandbox program that reduces the risk of security breaches by restricting the running environment of untrusted applications using Linux namespaces, seccomp-bpf and Linux capabilities.
* [#D] [2019-06-11] compression - Difference between --xz and --lzma in GNU tar? - Unix & Linux Stack Exchange
:PROPERTIES:
:ID:       tcmprssndffrncbtwnxzndlzmngntrnxlnxstckxchng
:END:
https://unix.stackexchange.com/questions/72037/difference-between-xz-and-lzma-in-gnu-tar
: This options control which external binary tar calls for compressing its data stream: lzma and xz respectively. While both of them uses the same compression algorithm by default, xz is considered more up-to-date and feature rich, with lzma being somewhat legacy tool. Modern version of xz-utils provides both commands, with lzma being an 'alias' for xz --format=lzma (man xz).
* TODO [#C] tini is used in airsonic                                 :docker:
:PROPERTIES:
:CREATED:  [2020-08-21]
:ID:       tnssdnrsnc
:END:

* [#C] [2020-03-18] remarkable: What's their portability story? I don't want my personal knowledge store to be l... | Hacker News :remarkable:
:PROPERTIES:
:ID:       wdrmrkblwhtsthrprtbltystryprsnlknwldgstrtblhckrnws
:END:
https://news.ycombinator.com/item?id=22607112
: Not great, you can only officially export PDF, PNG, or SVG, though their cloud management does seem to work really well and as I understand, files are stored locally on each device once synced.
: That said, it runs linux so you could conceivably backup the files yourself. You can ssh into your tablet, run sftp, w/e. But they are in some proprietary .lines format.
: There's a wiki with more details (the file format stuff is further down): https://remarkablewiki.com/tech/filesystem
: It may be possilbe you could hack it to run xournal, but I've no idea.
* TODO [#C] [2020-04-16] [[https://lobste.rs/s/jwwhb6/gnu_guix_1_1_0_released#c_88slhh][GNU Guix 1.1.0 released | Lobsters]] :nix:towatch:
:PROPERTIES:
:ID:       thslbstrssjwwhbgngxrlsdcslhhgngxrlsdlbstrs
:END:
: I never understood what all the fuzz is about until I saw this talk at fosdem this year: https://fosdem.org/2020/schedule/event/guix/
: I really liked all the features presented, unfortunately I am not in an environment where I could use guix, but it is def. something I keep an eye on.

* [#C] [2020-06-18] [[https://pythonspeed.com/articles/dockerizing-python-is-hard/][Broken by default: why you should avoid most Dockerfile examples]]
:PROPERTIES:
:ID:       thspythnspdcmrtclsdckrzngtwhyyshldvdmstdckrflxmpls
:END:
: If you want fast builds, you want to rely on Docker’s layer caching. But by copying in the file before running pip install, all later layers are invalidated—this image will be rebuilt from scratch every time.
* [#C] [2020-02-08] Haskell for all: Why Dhall advertises the absence of Turing-completeness :configs:
:PROPERTIES:
:ID:       sthskllfrllwhydhlldvrtssthbsncftrngcmpltnss
:END:
http://www.haskellforall.com/2020/01/why-dhall-advertises-absence-of-turing.html
: Why Dhall advertises the absence of Turing-completeness
* [#C] [2020-08-22] use chronic (by default cron spams with stdout/stderr)
:PROPERTIES:
:ID:       stschrncbydfltcrnspmswthstdtstdrr
:END:
: I use `chronic` in almost all of my cron jobs so that cron sends me an email with the output only if the command has a return code of != 0.
* [#C] [2020-01-25] tmuxinator/tmuxinator: Manage complex tmux sessions easily
:PROPERTIES:
:ID:       sttmxntrtmxntrmngcmplxtmxsssnssly
:END:
https://github.com/tmuxinator/tmuxinator

* [#C] [2020-02-20] backup - Basic rsync command for bit-identical copies - Unix & Linux Stack Exchange
:PROPERTIES:
:ID:       thbckpbscrsynccmmndfrbtdntclcpsnxlnxstckxchng
:END:
https://unix.stackexchange.com/questions/118883/basic-rsync-command-for-bit-identical-copies
: So this is the basic command to make the destination identical to the source (absent hard links, ACLs and extended attributes):
: 
: rsync -a --delete SOURCE/ DESTINATION/
* [#C] [2020-04-19] [[https://news.ycombinator.com/item?id=22914789][QRCP: Transfer files to mobile device by scanning a QR code from the terminal | Hacker News]]
:PROPERTIES:
:ID:       snsnwsycmbntrcmtmdqrcptrnnnngqrcdfrmthtrmnlhckrnws
:END:
* TODO [#D] Even though Ahrens argues that there neither can nor should be any overview, I disobediently wrote another script to make an SVG image of it using GraphViz. I originally had it generating PNGs but they rapidly got too large. Here’s what the whole system looks like as of this morning:
:PROPERTIES:
:CREATED:  [2019-12-30]
:ID:       vnthghhrnsrgsthtthrnthrcnthwhlsystmlkslksfthsmrnng
:END:
cool!
[[https://clerestory.netlify.com/zk1/][Zettelkasten!]]
[[https://hyp.is/H1SH2isnEeqUGW-mAPhEsg/clerestory.netlify.com/zk1/][in context]]

* [2020-04-05] Start all of your commands with a comma (2009) | Hacker News
:PROPERTIES:
:ID:       snstrtllfyrcmmndswthcmmhckrnws
:END:
https://news.ycombinator.com/item?id=22778988
* [#C] [2020-01-09] Canop/broot: A new way to see and navigate directory trees
:PROPERTIES:
:ID:       thcnpbrtnwwytsndnvgtdrctrytrs
:END:
https://github.com/Canop/broot

* [2020-04-01] Jitsi Meet: An open source alternative to Zoom | Hacker News
:PROPERTIES:
:ID:       wdjtsmtnpnsrcltrntvtzmhckrnws
:END:
https://news.ycombinator.com/item?id=22669968
* [#C] [2020-10-12] [[https://github.com/jarun/nnn][jarun/nnn: n³ The unorthodox terminal file manager.]]
:PROPERTIES:
:ID:       mnsgthbcmjrnnnnjrnnnnnthnrthdxtrmnlflmngr
:END:

* [#D] [2020-10-05] [[https://github.com/tridactyl/tridactyl][tridactyl/tridactyl: A Vim-like interface for Firefox, inspired by Vimperator/Pentadactyl.]] :vim:
:PROPERTIES:
:ID:       mnsgthbcmtrdctyltrdctyltrfrfxnsprdbyvmprtrpntdctyl
:END:
* [#C] [2020-04-25] [[https://github.com/naelstrof/slop][naelstrof/slop: slop (Select Operation) is an application that queries for a selection from the user and prints the region to stdout.]] :exports:
:PROPERTIES:
:ID:       stsgthbcmnlstrfslpnlstrfsnfrmthsrndprntsthrgntstdt
:END:
: NixOS: slop
* [2020-07-02] benefit of compose -- builds automatically, so very easy to run stuff :docker:
:PROPERTIES:
:ID:       thbnftfcmpsbldstmtcllysvrysytrnstff
:END:
* [2020-07-01] ok, using explicit type: bind shows warning when source dir doesn't exist :docker:
:PROPERTIES:
:ID:       wdksngxplcttypbndshwswrnngwhnsrcdrdsntxst
:END:
* [#B] [2019-12-03] [[https://news.ycombinator.com/item?id=21685166][TLDR Digital Safety Checklist]] :security:
:PROPERTIES:
:ID:       tsnwsycmbntrcmtmdtldrdgtlsftychcklst
:END:
https://github.com/hongkonggong/tldr-digital-security/blob/master/README.md
* [2019-07-27] shell into image docker run -it --entrypoint /bin/bash circleci/python:latest :docker:
:PROPERTIES:
:ID:       stshllntmgdckrrntntrypntbnbshcrclcpythnltst
:END:
* [2019-08-24] systemd.unit
:PROPERTIES:
:ID:       stsystmdnt
:END:
https://www.freedesktop.org/software/systemd/man/systemd.unit.html#
: Note that systemctl reset-failed will cause the restart rate counter for a service to be flushed
* [#D] [2019-01-25] LTD-Beget/sprutio: Beget File Manager App (two-panel)
:PROPERTIES:
:ID:       frltdbgtsprtbgtflmngrpptwpnl
:END:
https://github.com/LTD-Beget/sprutio
holy crap, that's elaborate!
** [2019-06-01] last updated 2 years ago...
:PROPERTIES:
:ID:       stlstpdtdyrsg
:END:

* [#C] [2018-09-29] huginn/huginn: Create agents that monitor and act on your behalf. Your agents are standing by! :selfhosted:
:PROPERTIES:
:ID:       sthgnnhgnncrtgntsthtmntrndctnyrbhlfyrgntsrstndngby
:END:
https://github.com/huginn/huginn
** [2018-10-05]  hmm, interesting, kinda like open source ifttt. Wonder if I can come up to any decent uses?
:PROPERTIES:
:ID:       frhmmntrstngkndlkpnsrcftttwndrfcncmptnydcntss
:END:
* [2019-09-08] How can I add a volume to an existing Docker container? - Stack Overflow :docker:
:PROPERTIES:
:ID:       snhwcnddvlmtnxstngdckrcntnrstckvrflw
:END:
https://stackoverflow.com/questions/28302178/how-can-i-add-a-volume-to-an-existing-docker-container
: You can commit your existing container (that is create a new image from container’s changes) and then run it with your new mounts.

* [2019-05-03] Nested folders - Support - Syncthing Forum         :syncthing:
:PROPERTIES:
:ID:       frnstdfldrsspprtsyncthngfrm
:END:
https://forum.syncthing.net/t/nested-folders/11793/10
: Selection:
: Ildar Yusupov
: ildary
: Jul '18
: I see use case of nested folders: one folder shared with first computer and nested folder shared with second and never both folders shared with the same computer - because first folder is enough.
: 
: Jakob Borg
: calmh
: Syncthing Maintainer
: Jul '18
: Yeah, and you can do that, and it should work fine.

* [2019-05-03] nice, fork syncs pretty instantaneously            :syncthing:
:PROPERTIES:
:ID:       frncfrksyncsprttynstntnsly
:END:
* [2020-07-04] ok, so it's capable of catching up from a config file only (if you discard caches and certificates) :syncthing:
:PROPERTIES:
:ID:       stkstscpblfctchngpfrmcnfgflnlyfydscrdcchsndcrtfcts
:END:
* [2020-03-15] wow nice command to introspect everything       :systemd:dbus:
:PROPERTIES:
:ID:       snwwnccmmndtntrspctvrythng
:END:
: gdbus introspect -r --session --dest org.freedesktop.systemd1 --object-path /org/freedesktop/systemd1
* [2020-04-06] Dhall
:PROPERTIES:
:ID:       mndhll
:END:
: It's hard to take Dhall seriously because it seems like its authors don't take it seriously, and work on it for entertainment. They went through the trouble of creating bindings for five (!!) different languages, and the most popular of them, by a pretty wide margin, is Ruby. I assume Fortran, Delphi, and Idris are next on their list.
* [2020-05-04] [[https://blog.darknedgy.net/technology/2020/05/02/0/index.html][systemd, 10 years later: a historical and technical retrospective]] :systemd:
:PROPERTIES:
:ID:       mnsblgdrkndgynttchnlgyndxltrhstrclndtchnclrtrspctv
:END:
: 3.6. Case studies
: The above may sound rather theoretical and nitpicking, so let’s illustrate with a few examples.

some good examples of systemd gotchas
